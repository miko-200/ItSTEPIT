Ppos = player.position()
Ppos = Ppos.add(world(0,-1,0))

FULL_BLOCKS = [

    # --- Natural ---
    STONE,
    COBBLESTONE,
    DIRT,
    GRASS,
    COARSE_DIRT,
    PODZOL,
    SAND,
    RED_SAND,
    GRAVEL,
    CLAY,

    ANDESITE,
    DIORITE,
    GRANITE,

    SANDSTONE,
    RED_SANDSTONE,

    COAL_ORE,
    IRON_ORE,
    GOLD_ORE,
    DIAMOND_ORE,
    EMERALD_ORE,

    # --- Nether ---
    NETHERRACK,
    NETHER_BRICK,
    RED_NETHER_BRICK,
    NETHER_WART_BLOCK,
    WARPED_PLANKS,
    SOUL_SAND,
    SOUL_SOIL,
    BLACKSTONE,
    BASALT,
    POLISHED_BASALT,

    # --- Decorative / Building ---
    BRICKS,
    STONE_BRICKS,
    MOSSY_STONE_BRICKS,
    CRACKED_STONE_BRICKS,
    CHISELED_STONE_BRICKS,

    PURPUR_BLOCK,
    PRISMARINE,
    DARK_PRISMARINE,

    PLANKS_OAK,
    PLANKS_SPRUCE,
    PLANKS_BIRCH,
    PLANKS_JUNGLE,
    PLANKS_ACACIA,
    PLANKS_DARK_OAK,
    BAMBOO_PLANKS,
    CHERRY_PLANKS,


    # --- Wool (colored full blocks) ---
    WOOL,
    ORANGE_WOOL,
    MAGENTA_WOOL,
    LIGHT_BLUE_WOOL,
    YELLOW_WOOL,
    LIME_WOOL,
    PINK_WOOL,
    GRAY_WOOL,
    LIGHT_GRAY_WOOL,
    CYAN_WOOL,
    PURPLE_WOOL,
    BLUE_WOOL,
    BROWN_WOOL,
    GREEN_WOOL,
    RED_WOOL,
    BLACK_WOOL,

    # --- Terracotta (colored full blocks) ---
    WHITE_TERRACOTTA,
    ORANGE_TERRACOTTA,
    MAGENTA_TERRACOTTA,
    LIGHT_BLUE_TERRACOTTA,
    YELLOW_TERRACOTTA,
    LIME_TERRACOTTA,
    PINK_TERRACOTTA,
    GRAY_TERRACOTTA,
    LIGHT_GRAY_TERRACOTTA,
    CYAN_TERRACOTTA,
    PURPLE_TERRACOTTA,
    BLUE_TERRACOTTA,
    BROWN_TERRACOTTA,
    GREEN_TERRACOTTA,
    RED_TERRACOTTA,
    BLACK_TERRACOTTA

]
Ppos = None
correctBlocks = [GRASS]
score = 0
def buildGame():
    global Ppos
    Ppos = player.position()
    Ppos = Ppos.add(world(0,-1,0))

    blocks.fill(STONE_BRICKS, Ppos, 
        Ppos.add(world(8,-1,8)),FillOperation.REPLACE)

    blocks.fill(PALE_OAK_WOOD, Ppos.add(world(2,0,2)), 
        Ppos.add(world(6,0,6)), FillOperation.REPLACE)

    blocks.fill(AIR, Ppos.add(world(3,0,3)),
        Ppos.add(world(5,0,5)), FillOperation.REPLACE)
    
    return Ppos

def startGame():
    blocks.fill(AIR, Ppos.add(world(3,0,3)),
            Ppos.add(world(5,0,5)), FillOperation.REPLACE)
    start = Ppos.add(world(3,0,3))

    global correctBlocks
    correctBlocks = []

    for x in range(3):
        for z in range(3):
            curBlock = FULL_BLOCKS[randint(0, len(FULL_BLOCKS)-1)]
            correctBlocks.append(curBlock)
            blocks.place(curBlock, start.add(world(x,0,z)))

    player.say("Remember the blocks, you have 15 sec")
    loops.pause(12000)
    player.say("3")
    loops.pause(1000)
    player.say("2")
    loops.pause(1000)
    player.say("1")
    loops.pause(1000)

    blocks.fill(AIR, Ppos.add(world(3,0,3)),
        Ppos.add(world(5,0,5)), FillOperation.REPLACE)

    return correctBlocks

def checkAnswer():
    start = Ppos.add(world(3, 0, 3))
    i = 0
    for x in range(3):
        for z in range(3):
            if blocks.test_for_block(correctBlocks[i], 
                start.add(world(x,0,z))) == False:
                return False
            i += 1
    return True


def winCheck():
    global score
    
    if checkAnswer():
        score += 1
        player.say("✅ Correct!")
    else:
        player.say("❌ Incorrect!")

    player.say("Score: " + str(score))

    return False

player.on_item_interacted(IRON_SHOVEL, buildGame)
player.on_item_interacted(GOLDEN_SHOVEL, startGame)
player.on_item_interacted(DIAMOND_SHOVEL, winCheck)

COLOR_BLOCKS = [
    RED_CONCRETE,
    BLUE_CONCRETE,
    CYAN_CONCRETE,
    GRAY_CONCRETE,
    LIME_CONCRETE,
    PINK_CONCRETE,
    BLACK_CONCRETE,
    BROWN_CONCRETE,
    GREEN_CONCRETE,
    WHITE_CONCRETE,
    ORANGE_CONCRETE,
    PURPLE_CONCRETE,
    YELLOW_CONCRETE,
    LIGHT_BLUE_CONCRETE,
    MAGENTA_CONCRETE,
    LIGHT_GRAY_CONCRETE
]

currentColors = ["lol"]
def colorCheck(block):
    colorName = ""

    if block == RED_CONCRETE:
        colorName = "RED"
    elif block == BLUE_CONCRETE:
        colorName = "BLUE"
    elif block == CYAN_CONCRETE:
        colorName = "CYAN"
    elif block == GRAY_CONCRETE:
        colorName = "GRAY"
    elif block == LIME_CONCRETE:
        colorName = "LIME"
    elif block == PINK_CONCRETE:
        colorName = "PINK"
    elif block == BLACK_CONCRETE:
        colorName = "BLACK"
    elif block == BROWN_CONCRETE:
        colorName = "BROWN"
    elif block == GREEN_CONCRETE:
        colorName = "GREEN"
    elif block == WHITE_CONCRETE:
        colorName = "WHITE"
    elif block == ORANGE_CONCRETE:
        colorName = "ORANGE"
    elif block == PURPLE_CONCRETE:
        colorName = "PURPLE"
    elif block == YELLOW_CONCRETE:
        colorName = "YELLOW"
    elif block == LIGHT_BLUE_CONCRETE:
        colorName = "LIGHT BLUE"
    elif block == LIGHT_GRAY_CONCRETE:
        colorName = "LIGHT GRAY"
    elif block == MAGENTA_CONCRETE:
        colorName = "MAGENTA"
    else:
        colorName = "Error"
    
    return colorName 

def whatBlock(name = ""):
    block = RED_CONCRETE

    if name == "RED":
        colorName = RED_CONCRETE
    elif name == "BLUE":
        colorName = BLUE_CONCRETE
    elif name == "CYAN":
        colorName = CYAN_CONCRETE
    elif name == "GRAY":
        colorName = GRAY_CONCRETE
    elif name == "LIME":
        colorName = LIME_CONCRETE
    elif name == "PINK":
        colorName = PINK_CONCRETE
    elif name == "BLACK":
        colorName = BLACK_CONCRETE
    elif name == "BROWN":
        colorName = BROWN_CONCRETE
    elif name == "GREEN":
        colorName = GREEN_CONCRETE
    elif name == "WHITE":
        colorName = WHITE_CONCRETE
    elif name == "ORANGE":
        colorName = ORANGE_CONCRETE
    elif name == "PURPLE":
        colorName = PURPLE_CONCRETE
    elif name == "YELLOW":
        colorName = YELLOW_CONCRETE
    elif name == "LIGHT BLUE":
        colorName = LIGHT_BLUE_CONCRETE
    elif name == "LIGHTGRAY":
        colorName = LIGHT_GRAY_CONCRETE
    elif name == "MAGENTA":
        colorName = MAGENTA_CONCRETE
    else:
        colorName = RED_CONCRETE
    
    return colorName   


def startColorGame():
    global Ppos
    Ppos = player.position()
    Ppos = Ppos.add(world(0,-1,0))
    
    buildColorGame()

    return 5

def buildColorGame():

    start = Ppos

    global currentColors
    currentColors = []

    for x in range(5):
        for y in range(5):
            curColorBlock = COLOR_BLOCKS[randint(0, len(COLOR_BLOCKS)-1)]
            currentColors.append(colorCheck(curColorBlock))
            blocks.fill(curColorBlock, start.add(world(4*x, 0, 4*y)),
                start.add(world(4 + 4*x, 0, 4 + 4*y)), FillOperation.REPLACE)

    chooseColor()

    return False

def timer(times):
    for i in range(times):
        player.say(times - i)
        loops.pause(1000)

colorBlockScore = 0

def chooseColor():
    player.say("Game starting in...")
    loops.pause(100)
    timer(3)

    color = currentColors[randint(0, len(currentColors)-1)]

    player.say("The color is " + color)
    time = 6
    if colorBlockScore >= 2 and colorBlockScore < 5:
        time = 5
    elif colorBlockScore >= 5 and colorBlockScore < 10:
        time = 4
    elif colorBlockScore >= 10 and colorBlockScore < 25:
        time = 3
    elif colorBlockScore >= 25:
        time = 2

    timer(time)

    corBlock = whatBlock(color)

    win = True
    if blocks.test_for_block(corBlock, pos(0, -1, 0)) != True:
        win = False
    
    colorBlockWinCheck(win)

    return False

def colorBlockWinCheck(win):
    global colorBlockScore
        
    if win:
        colorBlockScore += 1
        player.say("✅ Correct!")
    else:
        player.say("❌ Incorrect!")

    player.say("Score: " + str(colorBlockScore))






player.on_item_interacted(IRON_SWORD, startColorGame)
player.on_item_interacted(GOLDEN_SWORD, buildColorGame)


player.say(":)")